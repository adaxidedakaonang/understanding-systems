## 进程 线程

### 进程

运行中的程序，被称为进程

并行：多核同时多任务  
并发：单核交替多任务

进程活动期间至少具备三种基本状态：
* 运行状态：该时刻占用CPU；
* 就绪状态：可运行，等待CPU召唤；
* 阻塞状态：暂时不可运行，等待事件发生；  
* 其它
>* 创建状态
>* 结束状态  

挂起状态：描述进程阻塞但没有占用实际的物理内存空间的状态。  
* 阻塞挂起状态：进程在外存（硬盘），等待事件发生；
* 就绪挂起状态：进程在外存，只要进入内存，即刻运行。  

阻塞->阻塞挂起；  
就绪->就绪挂起。  

**处于阻塞状态的进程只能被其他进程唤醒**  

### 线程  

可以并发运行并共享相同的地址空间的实体。

线程共享进程所拥有的代码，数据，栈。线程有自己独享的寄存器和栈。  

线程的缺点：
* 一个线程崩溃时，会导致所属进程的所有线程崩溃。

**线程**与**进程**对比
* 进程是资源分配的单位，线程是CPU调度的单位；
* 进程拥有一个完整的资源平台，线程只独享必不可少的资源；
* 线程同样具有就绪，堵塞，执行三种基本状态；
* 线程能减少并发执行的时间和空间开销。

**线程是调度的基本单位，进程是资源拥有的基本单位** 

#### 线程的实现
* 用户线程：用户空间实现，由用户使用线程库进行管理；
* 内核线程：内核空间创建，内核管理；
* 轻量级进程：内核中支持用户线程。  

用户线程缺点：
* 一个线程因发起调用而阻塞，那么该进程的用户线程都不能执行；
* 用户态的线程不能打断运行中的线程；
* 多线程时，每个线程得到的时间片少。

内核线程缺点：
* 系统开销比较大 (线程的创建，终止和切换都是通过系统调用的方式进行的)

### 调度

#### 调度算法

**单核CPU**
1. 先来先服务：每次从就绪队列选择最先进⼊队列的进程，然后⼀直运⾏，直到进程退出或被阻塞，才会继续从队列中选择第⼀个进程接着运⾏
2. 最短作业优先：优先选择运⾏时间最短的进程来运⾏
3. 高响应比优先：  
   优先权=（等待时间+要求服务时间）/ 要求服务时间  
4. 时间片轮转：一个时间段内没运行完的进程回到队尾
5. 最高优先级调度算法
6. 多级反馈队列调度算法：
   * 优先级越高，时间片越短


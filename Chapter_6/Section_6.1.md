## 文件系统

### 文件系统的基本组成

文件系统是操作系统中负责管理持久数据的子系统

每个文件会被分配两个数据结构：
1. 索引节点
2. 目录项

#### 索引节点 （index node）

记录文件的元信息：索引节点编号，文件大小，访问权限，创建时间，修改时间，**数据在磁盘的位置** 等等。 

索引节点是文件的唯一标识，其存储在硬盘中，所以索引节点同样占用磁盘空间。

#### 目录项 （directory entry）

记录文件的名字，**索引节点指针**以及与其他目录项的层级关联关系。多个目录项关联起来，就会形成目录结构

与索引节点不同，**目录项是由内核维护的一个数据结构，不存放于磁盘，而是缓缓存在内存**。

索引节点唯一标识一个文件，目录项记录文件的名，所以目录项和索引节点的关系是多对一。

目录也是文件。普通文件在磁盘里保存文件数据，目录文件在磁盘里保存子目录或文件。

目录项和目录不是一个东西。  
目录是个文件，持久化存储在磁盘，而目录项内核一个数据结构，缓存在内存。

磁盘读写的最小单位是扇区，扇区大小只有512B

文件系统把多个扇区组成一个**逻辑块**，因此每次读写的最小单位就是逻辑块，Linux中的逻辑块大小为4KB（一次读写8个扇区）


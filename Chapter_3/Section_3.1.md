## 3.1 虚拟内存

* 虚拟内存地址：程序使用的内存地址
* 物理内存地址：硬件里面的空间地址

管理虚拟地址和物理地址之间的关系：  
1. 内存分段
2. 内存分页  

### 内存分段

1. 段选择子
2. 段内偏移量  
   
不足：
1. 内存碎片；
2. 内存交换效率低
   
### 内存分页

将整个虚拟和物理内存空间切成一段段固定尺寸的大小。Linux页的大小为4KB。

虚拟地址与物理地址之间通过页表来映射。  
虚拟地址分为页号和页内偏移量。  


#### 多级页表 

64位系统有四级目录（四级分页）：
1. 全局页目录项 PGD；
2. 上层页目录项 PUD；
3. 中间页目录项 PMD；
4. 页表项 PTE；  

#### TLB （页表缓存）

存放程序最常访问的页表项的cache

### 段页式内存管理  

地址结构由**段号 段内页号 页内位移**三部分组成。

三次内存访问：
* 访问段表，得到页表起始地址；
* 访问页表，得到物理页号；
* 物理页号与页内位移组合，得到物理地址。



### Linux 内存管理  








